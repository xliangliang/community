<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.liangliang.community.dao.mapper.UserMapper">
    <resultMap id="BaseResultMap" type="com.liangliang.community.entity.User">
        <result column="id" jdbcType="INTEGER" property="id" />
        <result column="account_id" jdbcType="VARCHAR" property="accountId" />
        <result column="name" jdbcType="VARCHAR" property="name" />
        <result column="token" jdbcType="CHAR" property="token" />
        <result column="gmt_create" jdbcType="BIGINT" property="gmtCreate" />
        <result column="gmt_modified" jdbcType="BIGINT" property="gmtModified" />
    </resultMap>

    <select id="getUser" resultType="com.liangliang.community.entity.User">
        select id,account_id,name,token,gmt_create,gmt_modified from c_user where name = #{fullname};
    </select>

    <insert id="insertUser" parameterType="com.liangliang.community.entity.User" useGeneratedKeys="true" keyProperty="id">
        insert into c_user (account_id,name,token,gmt_create,gmt_modified) values (#{user.accountId},#{user.name},#{user.token},#{user.gmtCreate},#{user.gmtModified})
    </insert>

    <update id="updateLastLoginTime" parameterType="com.liangliang.community.entity.User">
        update c_user set last_login_time = #{user.lastLoginTime} where fullname = #{user.fullname};
    </update>
</mapper>